<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>letsRept: An Interface to the Reptile Database • letsRept</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="letsRept: An Interface to the Reptile Database">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">letsRept</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/letsRept.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/case-study.html">Case Study: Using letsRept to harmonize reptile species nomenclature</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/joao-svalencar/letsRept/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>letsRept: An Interface to the Reptile
Database</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/joao-svalencar/letsRept/blob/HEAD/vignettes/letsRept.Rmd" class="external-link"><code>vignettes/letsRept.Rmd</code></a></small>
      <div class="hidden name"><code>letsRept.Rmd</code></div>

    </div>

    
    
<p>This package was developed to facilitate the processes of reptile
nomenclature update based on a search for species synonyms according to
the <a href="https://reptile-database.reptarium.cz" class="external-link">Reptile Database</a>
website (Uetz et al., 2025).</p>
<p>Currently, the package accesses many species information from the
Reptile Database using R interface.</p>
<p>It is useful to people trying to harmonize reptile nomenclature in
databases from different sources (IUCN, species traits database, etc),
or trying to get summaries from a given higher taxa or region (e.g.:
Snakes from Brazil). But it can also just print single species accounts
directly in R for quick information check.</p>
<div class="section level3">
<h3 id="download">
<strong>Download</strong><a class="anchor" aria-label="anchor" href="#download"></a>
</h3>
<p>The package is available on CRAN, check if the installed version is
1.1.0 or above. If not, the development version can be installed from
GitHub.</p>
<p>To install the stable version of this package, users must run:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install CRAN version (check package version, must be 1.1.0 or above)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"letsRept"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#OR</span></span>
<span></span>
<span><span class="co"># Install development version from GitHub</span></span>
<span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"joao-svalencar/letsRept"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/joao-svalencar/letsRept" class="external-link">letsRept</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="list-of-functions-and-examples">
<strong>List of functions and examples</strong><a class="anchor" aria-label="anchor" href="#list-of-functions-and-examples"></a>
</h3>
<p><strong>NOTE:</strong> Some functions use parallel processing by
default. Parallel processing may affect system performance. Adjust the
number of cores according to your needs. A snippet showing how to access
the number of available cores in your computer is provided along with
the functions examples.</p>
<div class="section level4">
<h4 id="function-reptsearch">
<strong>Function <code>reptSearch</code>:</strong><a class="anchor" aria-label="anchor" href="#function-reptsearch"></a>
</h4>
<p>Retrieves species information from The Reptile Database using a
binomial species name.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># single species:</span></span>
<span><span class="fu"><a href="../reference/reptSearch.html">reptSearch</a></span><span class="op">(</span>binomial <span class="op">=</span> <span class="st">"Apostolepis adhara"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># If user wants to check the list of references related to species, as listed in RDB:</span></span>
<span><span class="fu"><a href="../reference/reptSearch.html">reptSearch</a></span><span class="op">(</span>binomial <span class="op">=</span> <span class="st">"Bothrops pauloensis"</span>, getRef<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="../reference/reptSearch.html">reptSearch()</a></code> supports synonym-based queries. If the
provided binomial does not match any currently valid species name, the
function automatically passes the query to
<code>reptAdvancedSearch(synonym = binomial)</code>. In such cases, if
the synonym can be unambiguously resolved to a valid species, the
function will return the corresponding species information. Otherwise,
it provides a link (which can be accessed using
<code>reptSpecies(url = link)</code>) to a list of all species that
include the queried synonym in their synonymy.</p>
</div>
<div class="section level4">
<h4 id="function-reptrefs">
<strong>Function <code>reptRefs</code>:</strong><a class="anchor" aria-label="anchor" href="#function-reptrefs"></a>
</h4>
<p>Retrieves the reference list for a given species from the Reptile
Database. By default, it returns both the citation and a link to the
reference source (if available). If the user sets
<code>getLink = FALSE</code>, the function returns only the plain-text
references.</p>
<p>This function is useful to extract citation metadata for taxonomic or
historical analyses.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Basic usage</span></span>
<span><span class="fu"><a href="../reference/reptRefs.html">reptRefs</a></span><span class="op">(</span><span class="st">"Boa constrictor"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># If you want only reference texts, without links:</span></span>
<span><span class="fu"><a href="../reference/reptRefs.html">reptRefs</a></span><span class="op">(</span><span class="st">"Boa constrictor"</span>, getLink <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="function-reptadvancedsearch">
<strong>Function <code>reptAdvancedSearch</code>:</strong><a class="anchor" aria-label="anchor" href="#function-reptadvancedsearch"></a>
</h4>
<p>Creates a link for a page as derived from an Advanced Search in RD
(multiple species in a page):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create multiple species link:</span></span>
<span><span class="va">link_boa</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reptAdvancedSearch.html">reptAdvancedSearch</a></span><span class="op">(</span>genus <span class="op">=</span> <span class="st">"Boa"</span>, exact <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co">#returns a link to a list of all Boa species.</span></span>
<span></span>
<span><span class="va">link_apo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reptAdvancedSearch.html">reptAdvancedSearch</a></span><span class="op">(</span>genus <span class="op">=</span> <span class="st">"Apostolepis"</span><span class="op">)</span> <span class="co">#returns a link to a list of all Apostolepis species</span></span>
<span></span>
<span><span class="va">link</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reptAdvancedSearch.html">reptAdvancedSearch</a></span><span class="op">(</span>higher <span class="op">=</span> <span class="st">"snakes"</span>, location <span class="op">=</span> <span class="st">"Brazil"</span><span class="op">)</span> <span class="co">#returns a link to a list of all snake species in Brazil</span></span>
<span></span>
<span><span class="va">link</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reptAdvancedSearch.html">reptAdvancedSearch</a></span><span class="op">(</span>year <span class="op">=</span> <span class="st">"2010 OR 2011 OR 2012"</span><span class="op">)</span> <span class="co">#returns a link to a list of all species described from 2010 to 2012</span></span></code></pre></div>
<p><code>reptAdvancedSearch(synonym = "example")</code> will return the
species information directly (via <code>reptSearch("example")</code>) if
the synonym uniquely matches a single valid species. The
<code>exact = TRUE</code> argument in the <em>Boa</em> example parses
the information strictly as “Boa”, avoiding to return genus like
<em>Pseudoboa</em>, or <em>Boaedon</em>.</p>
<p>⚠️ <strong>Note:</strong></p>
<p>The argument <code>exact</code> does not work properly for searches
using logical arguments (e.g. <code>AND/OR</code>). If you want to force
an exact match (e.g., “<em>Boa</em>” as a phrase) with multiple terms
(e.g., “<em>Boa</em> OR <em>Apostolepis</em>”), you must manually
include quotes in the input string:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">link</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reptAdvancedSearch.html">reptAdvancedSearch</a></span><span class="op">(</span>synonym <span class="op">=</span> <span class="st">"\"Boa\" OR Apostolepis"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="function-reptspecies">
<strong>Function <code>reptSpecies</code>:</strong><a class="anchor" aria-label="anchor" href="#function-reptspecies"></a>
</h4>
<p>Retrieve species data from the species link created by
<code>reptAdvancedSearch</code>. User can also copy and paste the url
from a RD webpage containing the list of species derived from an
advanced search. It includes higher taxa information, authors, year of
description, and the species url. By default this function uses parallel
processing, with default set to use half of the available cores. If user
wants to use just one core, there are options for backup saving based on
the <code>checkpoint</code> argument.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#check number of available cores:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"parallel"</span><span class="op">)</span></span>
<span><span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># sample multiple species data:</span></span>
<span><span class="co">#Returns higher taxa information and species url:</span></span>
<span><span class="va">boa</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reptSpecies.html">reptSpecies</a></span><span class="op">(</span><span class="va">link_boa</span>, taxonomicInfo <span class="op">=</span> <span class="cn">TRUE</span>, getLink <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co">#link from reptAdvancedSearch(genus = "Boa")</span></span>
<span></span>
<span><span class="co">#example 2</span></span>
<span><span class="va">apo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reptSpecies.html">reptSpecies</a></span><span class="op">(</span><span class="va">link_apo</span>, taxonomicInfo <span class="op">=</span> <span class="cn">TRUE</span>, getLink <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co">#link from reptAdvancedSearch(genus = "Apostolepis")</span></span>
<span></span>
<span><span class="co">#Returns only species url - Faster and recommended for large datasets:</span></span>
<span><span class="va">boa</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reptSpecies.html">reptSpecies</a></span><span class="op">(</span><span class="va">link_boa</span>, taxonomicInfo <span class="op">=</span> <span class="cn">FALSE</span>, getLink <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co">#link from reptAdvancedSearch(genus = "Boa")</span></span>
<span></span>
<span><span class="co">#Returns only species names - Faster and recommended for large datasets for just nomenclatural check:</span></span>
<span><span class="va">boa</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reptSpecies.html">reptSpecies</a></span><span class="op">(</span><span class="va">link_boa</span>, taxonomicInfo <span class="op">=</span> <span class="cn">FALSE</span>, getLink <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="co">#link from reptAdvancedSearch(genus = "Boa")</span></span>
<span></span>
<span><span class="co">#example 2</span></span>
<span><span class="va">apo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reptSpecies.html">reptSpecies</a></span><span class="op">(</span><span class="va">link_apo</span>, taxonomicInfo <span class="op">=</span> <span class="cn">FALSE</span>, getLink <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co">#link from reptAdvancedSearch(genus = "Apostolepis")</span></span>
<span></span>
<span><span class="co">#With checkpoint and backups (only without parallel sampling: a lot slower but safer):</span></span>
<span><span class="va">path</span> <span class="op">&lt;-</span> <span class="st">"path/to/save/backup_file.rds"</span> <span class="co">#not to run just example </span></span>
<span><span class="va">apo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reptSpecies.html">reptSpecies</a></span><span class="op">(</span><span class="va">link_apo</span>, taxonomicInfo <span class="op">=</span> <span class="cn">FALSE</span>, getLink <span class="op">=</span> <span class="cn">TRUE</span>, checkpoint<span class="op">=</span><span class="fl">6</span>, backup_file<span class="op">=</span><span class="va">path</span><span class="op">)</span> <span class="co">#link from reptAdvancedSearch(genus = "Apostolepis")</span></span></code></pre></div>
<p>⚠️ <strong>Note:</strong></p>
<p>All console messages, warnings, and progress updates can be silenced.
However, <code><a href="../reference/reptSpecies.html">reptSpecies()</a></code> issues a helpful warning if any
species information fails to be retrieved, along with instructions on
how to access those entries from the function output.</p>
<p>As many functions in <code>letsRept</code> relies on internet
connection errors or failed species information sampling might happen
with no regards on the package coding. From <code><a href="../reference/reptSpecies.html">reptSpecies()</a></code> a
given warning might appear:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>Warning message<span class="sc">:</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>In <span class="fu">reptSpecies</span>(<span class="at">dataList =</span> allReptilesLinks, <span class="at">getLink =</span> <span class="cn">FALSE</span>, <span class="at">taxonomicInfo =</span> <span class="cn">TRUE</span>,  <span class="sc">:</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>  Data sampling completed with errors <span class="cf">for</span> the following species<span class="sc">:</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="sc">-</span> Ablepharus himalayanus<span class="sc">:</span> cannot open the connection</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="sc">-</span> Acanthodactylus tristrami<span class="sc">:</span> cannot open the connection</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="sc">-</span> Amphisbaena leucocephala<span class="sc">:</span> cannot open the connection</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="sc">-</span> Amphisbaena vanzolinii<span class="sc">:</span> cannot open the connection</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="sc">-</span> Amyda ornata<span class="sc">:</span> cannot open the connection</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>... and <span class="dv">10</span> others</span></code></pre></div>
<p>In this case, all species have been tried to be sampled once, and for
some (in the example: 15 species) loading their page in R failed. This
will provide a dataframe with the usual 7 columns desired when
<code>taxonomicInfo = TRUE</code>, plus a column to report the occurence
of an error, the message related to the error and the species url
regardeless of if <code>getLink = FALSE</code> and the code necessary to
extract the failed species from the output in order to retry their
sampling:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">failed_spp</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">[</span><span class="va">df</span><span class="op">$</span><span class="va">species</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">df</span><span class="op">$</span><span class="va">species</span><span class="op">[</span><span class="va">df</span><span class="op">$</span><span class="va">error</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'species'</span>, <span class="st">'url'</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<p>Where <code>df</code> is object named in the first run of
<code><a href="../reference/reptSpecies.html">reptSpecies()</a></code>. This line samples the object selecting all
species that got any errors in the previous run along with their url,
the current requeried entries to run <code><a href="../reference/reptSpecies.html">reptSpecies()</a></code> with
argument <code>dataList</code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">failed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reptSpecies.html">reptSpecies</a></span><span class="op">(</span>dataList <span class="op">=</span> <span class="va">failed_spp</span>, taxonomicInfo <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>To merge the original <code>df</code> object with the ressampled
species we first remove the failed species from <code>df</code>, then we
<code>rbind</code> the objects and reorder the species:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">[</span><span class="op">!</span><span class="va">df</span><span class="op">$</span><span class="va">species</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">df</span><span class="op">$</span><span class="va">species</span><span class="op">[</span><span class="va">allRept</span><span class="op">$</span><span class="va">error</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">8</span>,<span class="op">-</span><span class="fl">9</span>,<span class="op">-</span><span class="fl">10</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">dfNew</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">df</span>, <span class="va">failed</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dfNew</span> <span class="op">&lt;-</span> <span class="va">dfNew</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">dfNew</span><span class="op">$</span><span class="va">species</span><span class="op">)</span>,<span class="op">]</span></span></code></pre></div>
<p>A similar approach is possible for any of the functions tied to web
scraping.</p>
<p>A new version of <code><a href="../reference/reptSpecies.html">reptSpecies()</a></code> allowing users to ask for
automated retries is planned for a future version.</p>
</div>
<div class="section level4">
<h4 id="function-reptstats">
<strong>Function `reptStats``:</strong><a class="anchor" aria-label="anchor" href="#function-reptstats"></a>
</h4>
<p>This function summarizes the taxonomic content of a species list,
typically an object created with <code><a href="../reference/reptSpecies.html">reptSpecies()</a></code> with higher
taxa information. If no object is provided it summarizes the internal
dataset <code>allReptiles</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># summary of internal database allReptiles</span></span>
<span><span class="fu"><a href="../reference/reptStats.html">reptStats</a></span><span class="op">(</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># filter by family and return summary table (internal database)</span></span>
<span><span class="fu"><a href="../reference/reptStats.html">reptStats</a></span><span class="op">(</span>family <span class="op">=</span> <span class="st">"Elapidae"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/reptStats.html">reptStats</a></span><span class="op">(</span>family <span class="op">=</span> <span class="st">"Elapidae"</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># creating a subset from RDB</span></span>
<span><span class="va">link</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reptAdvancedSearch.html">reptAdvancedSearch</a></span><span class="op">(</span>higher<span class="op">=</span><span class="st">"snakes"</span>, location <span class="op">=</span> <span class="st">"Brazil"</span><span class="op">)</span></span>
<span><span class="va">snakes_br</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reptSpecies.html">reptSpecies</a></span><span class="op">(</span><span class="va">link</span>, taxonomicInfo <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># summarizing subset</span></span>
<span><span class="fu"><a href="../reference/reptStats.html">reptStats</a></span><span class="op">(</span><span class="va">snakes_br</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/reptStats.html">reptStats</a></span><span class="op">(</span><span class="va">snakes_br</span>, family <span class="op">=</span> <span class="st">"Viperidae"</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="function-reptsynonyms">
<strong>Function <code>reptSynonyms</code>:</strong><a class="anchor" aria-label="anchor" href="#function-reptsynonyms"></a>
</h4>
<p>Samples species synonyms either using binomial or a data frame with
species names and the species link (e.g.: the result of
<code>reptSpecies(link, getLink=TRUE)</code>). By default this function
uses parallel processing, with default set to use half of the available
cores.</p>
<p>I benchmarked the options using just a vector of species names and
using a dataframe with species url. In general using the dataframe is
faster, but for a small list of species using just species names should
be enough.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#check number of available cores:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"parallel"</span><span class="op">)</span></span>
<span><span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># sample species synonyms</span></span>
<span><span class="va">boa_syn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reptSynonyms.html">reptSynonyms</a></span><span class="op">(</span><span class="va">boa</span><span class="op">)</span> <span class="co"># using data frame created, with reptSpecies(boa_link, getLink = TRUE)</span></span>
<span><span class="va">Bconstrictor_syn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reptSynonyms.html">reptSynonyms</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Boa constrictor"</span><span class="op">)</span> <span class="co"># using species binomial</span></span>
<span></span>
<span><span class="co">#example 2</span></span>
<span><span class="va">apo_syn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reptSynonyms.html">reptSynonyms</a></span><span class="op">(</span><span class="va">apo</span><span class="op">)</span></span></code></pre></div>
<p>⚠️ <strong>Note:</strong></p>
<p>All console messages, warnings, and progress updates can be silenced.
However, <code><a href="../reference/reptSynonyms.html">reptSynonyms()</a></code> issues a helpful warning if any
species information fails to be retrieved, along with instructions on
how to access those entries from the original data frame.</p>
<p>The complex <code>regex</code> pattern used to sample synonyms from
The Reptile Database is quite efficient, but still samples about 0.2% in
an incorrect format. Most cases represent unusual nomenclature so users
might not face any problems trying to match current valid names. In any
case, I fixed (potentially) all unusual synonym formats in the internal
dataset <code>allSynonyms</code> (last update: 23rd May, 2025)</p>
</div>
<div class="section level4">
<h4 id="function-reptcompare">
<strong>Function <code>reptCompare</code>:</strong><a class="anchor" aria-label="anchor" href="#function-reptcompare"></a>
</h4>
<p>Compares the nomenclature of a user provided vector of species
(<code>x</code>) with the RDB nomenclature. User may provide vector of
current names sampled from RDB with reptSpecies(), otherwise the names
in <code>x</code> will be compared with those in the internal dataset
<code>allReptiles</code> (the dataset documentation to see the RDB
version (current is May, 2025).</p>
<p>The function returns species that are either unmatched (“review”) or
matched with the RDB list, or both.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_species</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Boa constrictor"</span>, <span class="st">"Pantherophis guttatus"</span>, <span class="st">"Fake species"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/reptCompare.html">reptCompare</a></span><span class="op">(</span><span class="va">my_species</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/reptCompare.html">reptCompare</a></span><span class="op">(</span><span class="va">my_species</span>, filter <span class="op">=</span> <span class="st">"review"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/reptCompare.html">reptCompare</a></span><span class="op">(</span><span class="va">my_species</span>, filter <span class="op">=</span> <span class="st">"matched"</span><span class="op">)</span></span></code></pre></div>
<p>Species that requires nomenclature review are usually queried to
<code><a href="../reference/reptSync.html">reptSync()</a></code>, while matched species is ideally queried to
<code>reptSplitCheck</code> with a reference date parsed to the argument
<code>pubDate</code>.</p>
</div>
<div class="section level4">
<h4 id="function-reptsync">
<strong>Function <code>reptSync</code>:</strong><a class="anchor" aria-label="anchor" href="#function-reptsync"></a>
</h4>
<p>Initially inspired in function aswSync from package <a href="https://github.com/hcliedtke/AmphiNom" class="external-link">AmphiNom</a> (Liedtke,
2018).</p>
<p>This is the most recursive function of the package, using all the
previous functions in order to provide the most likely updated
nomenclature for the queried species. By default this function uses
parallel processing, with default set to use half of the available
cores.</p>
<p>The function is divided in two main steps. Here is how it works:</p>
<p><strong>Step 1</strong></p>
<p>The function queries a vector of species (e.g.: IUCN, or a regional
list), check their validity through <code>reptSearch</code> and returns
a data frame with current valid species names. When
<code>reptSearch</code> finds a species page it assumes that is the
valid name for the queried species and returns the status “up_to_date”.
When <code>reptSearch</code> doesn’t find a species it parses the
binomial to <code>reptAdvancedSearch</code> using the synonym filter. If
<code>reptAvancedSearch</code> returns a link for a species page that
species name is considered valid for the synonym queried and the
function returns the status <code>"updated"</code>. Otherwise,
<code>reptAvancedSearch</code> will return a link for a page with a list
of species, then the function assumes that the queried synonym could be
assigned to any of those valid names and returns the status:
<code>"ambiguous"</code>. If the queried species does not return a
species page nor a page for multiple species the function returns to
columns <code>"RDB"</code> and <code>"status"</code> the sentence
<code>"not_found"</code>.</p>
<p><strong>Step 2</strong></p>
<p>Step 2 is activated only if <code>solveAmbiguity = TRUE</code>. When
<code>reptAvancedSearch</code> returns a link for a page with a list of
species, that link is parsed to <code>reptSpecies</code> which collects
species names and <code>urls</code> and automatically parses the
resulting data frame to <code>reptSynonyms</code>. Finally, with the
result of <code>reptSynonyms</code> the function compares the queried
species with all listed synonyms. If the queried species is actually
listed as a synonym of only one of the searched species (e.g. the
queried name is not a synonym, but is mentioned in the comments
section), the function will return that valid name and status will be
<code>"updated"</code>. If the queried species is actually a synonym of
more than one valid species, then the function will return both species
names and the status will still be <code>"ambiguous"</code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#check number of available cores:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"parallel"</span><span class="op">)</span></span>
<span><span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># comparing synonyms:</span></span>
<span><span class="va">query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Vieira-Alencar authoristicus"</span>,</span>
<span>           <span class="st">"Boa atlantica"</span>,</span>
<span>           <span class="st">"Boa diviniloqua"</span>,</span>
<span>           <span class="st">"Boa imperator"</span>,</span>
<span>           <span class="st">"Boa constrictor longicauda"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/reptSync.html">reptSync</a></span><span class="op">(</span><span class="va">query</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#example 2:</span></span>
<span><span class="va">query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Vieira-Alencar authorisensis"</span>,</span>
<span>           <span class="st">"Apostolepis ambiniger"</span>,</span>
<span>           <span class="st">"Apostolepis cerradoensis"</span>,</span>
<span>           <span class="st">"Elapomorphus assimilis"</span>,</span>
<span>           <span class="st">"Apostolepis tertulianobeui"</span>,</span>
<span>           <span class="st">"Apostolepis goiasensis"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/reptSync.html">reptSync</a></span><span class="op">(</span><span class="va">query</span><span class="op">)</span></span></code></pre></div>
<p>The column <code>"RDB"</code> shows current valid name according to
The Reptile Database.</p>
<p>Pay special attention to the <code>"status"</code> column:</p>
<p><strong>status:</strong></p>
<ul>
<li><p><code>"up_to_date"</code> - Species name provided is the current
valid name found in The Reptile Database</p></li>
<li><p><code>"updated"</code> - Species name provided is a synonym, and
the current valid name is reported unambiguously.</p></li>
<li><p><code>"ambiguous"</code> - Species name provided is considered a
synonym of more than one current valid species, likely from a split in
taxonomy.</p></li>
<li><p><code>"not_found"</code> - Species name provided in query is not
a current valid name nor synonym according to The Reptile Database. This
status could be derived from a typo within species name. A very rare
situation where this status can pop up is when the current valid name is
updated in the query but is not found in the list of synonyms.</p></li>
<li><p><code>"merge"</code> - Multiple names in the query are now
considered synonyms of a single valid species, likely from a
synonymization.</p></li>
</ul>
<p>⚠️ <strong>ATTENTION!</strong>⚠️</p>
<p><code>letsRept</code> does not make authoritative taxonomic
decisions. It matches input names against currently accepted names in
the Reptile Database (RDB).</p>
<p>A name marked as <code>"up_to_date"</code> may still refer to a taxon
that has been split, and thus may not reflect the most recent
population-level taxonomy, see function <code>reptSplitCheck</code>
below.</p>
</div>
<div class="section level4">
<h4 id="function-reptsplitcheck">
<strong>Function <code>reptSplitCheck</code>:</strong><a class="anchor" aria-label="anchor" href="#function-reptsplitcheck"></a>
</h4>
<p>Species names in recent databases are most likely marked with the
status <code>"up_to_date"</code>. However, the function
<code>reptSync</code> only indicates whether the queried binomial is
currently valid. In some cases, a species may have undergone a taxonomic
split, where part of its original populations retains the name while
others have been described as new species. <code>reptSync</code> does
not account for such cases, so it is recommended to review all
<code>"up_to_date"</code> species for potential taxonomic splits.</p>
<p>To assist with this, the function <code>reptSplitCheck</code> queries
binomial names as synonyms using <code>reptAdvancedSearch</code>, and
checks whether any associated species were described after a
user-defined date (e.g., the publication date of the dataset being
used). By default this function uses parallel processing, with default
set to use half of the available cores.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Atractus dapsilis"</span>,</span>
<span>           <span class="st">"Atractus trefauti"</span>,</span>
<span>           <span class="st">"Atractus snethlageae"</span>,</span>
<span>           <span class="st">"Tantilla melanocephala"</span>,</span>
<span>           <span class="st">"Oxybelis aeneus"</span>,</span>
<span>           <span class="st">"Oxybelis rutherfordi"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/reptSplitCheck.html">reptSplitCheck</a></span><span class="op">(</span><span class="va">query</span>, pubDate <span class="op">=</span> <span class="fl">2019</span><span class="op">)</span> <span class="co"># pubDate of Nogueira et al., Atlas of Brazilian Snakes</span></span>
<span><span class="fu"><a href="../reference/reptSplitCheck.html">reptSplitCheck</a></span><span class="op">(</span><span class="va">query</span>, pubDate <span class="op">=</span> <span class="fl">2019</span>, includeAll <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Pay special attention to the <code>"status"</code> column:</p>
<p><strong>status:</strong></p>
<ul>
<li><p><code>"up_to_date"</code> – The species name provided is not a
synonym of any species described after <code>pubDate</code>.</p></li>
<li><p><code>"check_split"</code> – The species name provided is a
synonym of at least one valid species described in or after
<code>pubDate</code>, suggesting a possible taxonomic split.</p></li>
<li><p><code>"not_found"</code> - This is a temporary status to detect
species that are not listed as synonyms of themselves, so it does not
appear in the advanced search (e.g.: to correct in RDB).</p></li>
</ul>
<p><strong>OBS:</strong> With argument <code>includeAll</code> set to
default (<code>FALSE</code>), if the queried species is a synonym of
only species described in the same year <code>pubDate</code> that are
already included in the queried species list, the queried species will
receive the status <code>"up_to_date"</code>. To check every possible
taxonomic split regardless of whether the new species is already present
in the queried species list, change the argument value to
<code>TRUE</code>.</p>
<p><strong>Attention:</strong> The column <code>"RDB"</code> shows only
the current valid names of species described in, or after,
<code>pubDate</code> according to The Reptile Database. It will NOT show
the queried species, but be aware that <code>reptSplitCheck</code> is
for valid names only (e.g.: “matched”, from <code>reptCompare</code>).
Therefore, the <code>"check_split"</code> status is only to highlight
that users must check if the data related to the queried species could
be used (e.g.: species traits) or divided (e.g.: distribution) to the
<code>"RDB"</code> column species. In other words, in the example above,
it does not mean that <em>Tantilla melanocephala</em> current valid name
is <em>T. selmae</em>. It means that users must ensure that the use of
the queried nomenclature will not overlook the possibility that the
data, or part of it, should be assigned to <em>T. selmae</em>
instead.</p>
</div>
<div class="section level4">
<h4 id="function-repttidysyn">
<strong>Function <code>reptTidySyn</code>:</strong><a class="anchor" aria-label="anchor" href="#function-repttidysyn"></a>
</h4>
<p>This function was developed exclusively to improve the visualization
of <code>reptSync</code> and <code>reptSplitCheck</code> outcomes.
Queried species with many current valid names would break the data frame
visualization in the R console. <code>reptTidySyn</code> stacks current
valid names and improves data visualization. Moreover, the argument
<code>filter</code>, allows users to filter the printed data frame by
“status” so users can focus only in the status that they want to
evaluate.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Vieira-Alencar authorisensis"</span>,</span>
<span>           <span class="st">"Apostolepis ambiniger"</span>,</span>
<span>           <span class="st">"Apostolepis cerradoensis"</span>,</span>
<span>           <span class="st">"Elapomorphus assimilis"</span>,</span>
<span>           <span class="st">"Apostolepis tertulianobeui"</span>,</span>
<span>           <span class="st">"Apostolepis goiasensis"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reptSync.html">reptSync</a></span><span class="op">(</span><span class="va">query</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/reptTidySyn.html">reptTidySyn</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="internal-datasets">
<strong>Internal datasets</strong><a class="anchor" aria-label="anchor" href="#internal-datasets"></a>
</h3>
<ul>
<li><p>The package counts with a full list of current valid species
(<code>allReptiles</code> - 12,500 species) with their respective higher
taxa information (updated to September 15th, 2025);</p></li>
<li><p>A dataset with all unique synonyms and chresonyms for each
current valid species (<code>allSynonyms</code> - 53,159 entries -
updated to May 23rd, 2025);</p></li>
<li><p>Another synonyms and chresonyms dataset with all entries
considering their respective references (<code>allSynonymsRef</code> -
110,413 entries - updated to May 23rd, 2025).</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="how-to-cite">
<strong>How to Cite</strong><a class="anchor" aria-label="anchor" href="#how-to-cite"></a>
</h3>
<p>To get the full reference to cite this package in publications, run
to get the most up to date version reference:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span><span class="st">"letsRept"</span><span class="op">)</span></span></code></pre></div>
<p>⚠️ <strong>Important note</strong></p>
<p><code>letsRept</code> retrieves valuable taxonomic and synonymy data
directly from <a href="http://www.reptile-database.org" class="external-link">The Reptile
Database</a>.</p>
<p>When citing this package, please also cite the original database as a
data source.</p>
</div>
<div class="section level3">
<h3 id="references">
<strong>References</strong><a class="anchor" aria-label="anchor" href="#references"></a>
</h3>
<p>Liedtke, H. C. (2018). AmphiNom: an amphibian systematic tool.
Systematics and Biodiversity, 17(1) 1-6. <a href="https://doi.org/10.1080/14772000.2018.1518935" class="external-link uri">https://doi.org/10.1080/14772000.2018.1518935</a></p>
<p>Uetz, P., Freed, P, Aguilar, R., Reyes, F., Kudera, J. &amp; Hošek,
J. (eds.) (2025). <a href="http://www.reptile-database.org" class="external-link">The Reptile
Database</a></p>
</div>
<div class="section level3">
<h3 id="author">
<strong>Author:</strong><a class="anchor" aria-label="anchor" href="#author"></a>
</h3>
<p>João Paulo dos Santos Vieira de Alencar</p>
<p>Email: <a href="mailto:joaopaulo.valencar@gmail.com" class="email">joaopaulo.valencar@gmail.com</a></p>
<p><a href="https://orcid.org/0000-0001-6894-6773" class="external-link">Orcid</a> | <a href="https://www.researchgate.net/profile/Joao-Paulo-Alencar" class="external-link">ResearchGate</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by João Paulo dos Santos Vieira-Alencar, Christoph Liedtke.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
